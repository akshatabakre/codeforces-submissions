#include<bits/stdc++.h>using namespace std; const int maxN = 10000010;int spf[maxN]; void pre(){    for(int i=0;i<maxN;i++) spf[i]=i;    for(int i=2;i*i<maxN;i++){        if(spf[i]==i){            for(int j=i*i;j<maxN;j+=i)                if(spf[j]==j) spf[j]=i;        }    }} void inparr(vector<int>&a, int n){    for(int i=0;i<n;i++) cin>>a[i];} int binpow(int b, int e){    int res = 1;    while(e > 0){        if(e & 1) res *= b;        b *= b;        e >>= 1;    }    return res;} void solve(){    int n, m;    cin >> n >> m;    vector<int> a(n), b(m);    inparr(a, n);     inparr(b, m);        vector<int> numprime(maxN, 0), denprime(maxN, 0);     for(int i=0;i<n;i++){        int x = a[i];        while(x > 1){            int p = spf[x];            while(x % p == 0){                numprime[p]++;                x /= p;            }        }    }     for(int i=0;i<m;i++){        int x = b[i];        while(x > 1){            int p = spf[x];            while(x % p == 0){                denprime[p]++;                x /= p;            }        }    }     for(int i=2; i < maxN; i++){        int c = min(numprime[i], denprime[i]);        numprime[i] = c;         denprime[i] = c;     }     for(int i=0;i<n;i++){        int x = a[i];        while(x > 1){            int p = spf[x];            int cnt = 0;            while(x % p == 0){                cnt++;                x /= p;            }            int remove_count = min(cnt, numprime[p]);            if(remove_count > 0){                a[i] /= binpow(p, remove_count);                numprime[p] -= remove_count;            }        }    }     for(int i=0;i<m;i++){        int x = b[i];        while(x > 1){            int p = spf[x];            int cnt = 0;            while(x % p == 0){                cnt++;                x /= p;            }            int remove_count = min(cnt, denprime[p]);            if(remove_count > 0){                b[i] /= binpow(p, remove_count);                denprime[p] -= remove_count;            }        }    }     cout << n << " " << m << endl;    for(int i=0;i<n;i++) cout << a[i] << " ";    cout << endl;    for(int i=0;i<m;i++) cout << b[i] << " ";    cout << endl;} int main(){    ios_base::sync_with_stdio(false);    cin.tie(NULL);    pre();    solve();    return 0;}